---
description: Review and manage BMF spec comments - resolve issues, add questions, provide answers in discussion threads.
---

## User Input

```text
$ARGUMENTS
```

## Overview

Review workflow for BMF specification comments. Default action is to **resolve** comments when the specification is clear and complete. Only ask questions or keep comments open if clarification is needed.

## Execution

### 1. Parse Arguments

Extract the project name from `$ARGUMENTS`. If empty, list available projects in `bmfs/` and ask user to specify one.

### 2. Load Comments File

Path: `bmfs/{project_name}/_comments.yaml`

If file doesn't exist:

- Report "No comments yet for {project_name}"
- Exit

### 3. Process Unresolved Comments

Filter comments where `resolved: false`.

If no unresolved comments exist:

- Report "All comments resolved!"
- Show summary and exit

### 4. Review Each Comment (Resolve by Default)

For each unresolved comment:

1. **Display the comment:**

```
Entity: {entityId}
Comment: {text}
Questions: {count} ({unanswered} unanswered)
```

2. **Check if spec is clear:** Read the referenced entity from the BMF spec files and analyze if the comment's concern has been addressed or is clear.

3. **Default action - RESOLVE:** If the specification is clear and complete, **automatically resolve** the comment. Set `resolved: true` with appropriate resolution text. Save file immediately.

4. **Only keep open if:** There are unanswered questions that need input, the specification is genuinely unclear or incomplete, or user explicitly requests to keep it open.

### 5. Handle Questions

If a comment has unanswered questions:

- Display each question
- If the answer is obvious from context, provide the answer and save
- If clarification is truly needed, ask the user

### 6. File Operations

When saving `_comments.yaml`, use format matching viewer export:

```yaml
# BMF Comments
# Generated by BMF Viewer

comments:
  - ref: entity:epic:name
    text: "Comment text"
    createdAt: 1704067200000
    resolved: true
    resolution: "Specification is clear and complete"
    questions:
      - question: "Question"
        answer: "Answer"
```

### 7. Completion

After processing all comments, report summary:

- Total comments: N
- Resolved: N (including newly resolved)
- Open: N
- Unanswered questions: N

## Behavior Rules

- **Resolve by default** - assume comments should be closed unless there's a real issue
- Timestamps should be Unix milliseconds (Date.now() equivalent)
- Never delete comments, only resolve them
- Provide meaningful resolution text explaining why the comment was resolved
- If spec content is missing or truly unclear, keep the comment open and explain why
