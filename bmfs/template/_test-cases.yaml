# yaml-language-server: $schema=../schema.json
# Test Cases Template - Сценарии использования (tc:*)
#
# ID формат: tc:domain:scenario-name


# =============================================================================
# ЧТО ТАКОЕ TC
# =============================================================================
#
# Test Case (tc:*) — это конкретный сценарий использования.
# Описывает пошаговый путь пользователя от входа до результата.
#
# TC связывается с сущностями BMF через теги:
#   tc:X:Y:start  — входная точка сценария
#   tc:X:Y        — промежуточный шаг
#   tc:X:Y:end    — финальная точка сценария


# =============================================================================
# ФОРМАТ ОПИСАНИЯ
# =============================================================================
#
# tc:domain:scenario-name:
#   description: |
#     Краткое описание сценария (1-2 предложения).
#
#     1. Первый шаг
#     2. Второй шаг
#     3. Третий шаг
#     ...
#
#     Проверить: важные моменты для тестирования.


# =============================================================================
# ПРИМЕРЫ
# =============================================================================

# --- Happy Path ---

tc:auth:login-success:
  description: |
    Успешный логин с валидными credentials.

    1. Пользователь открывает экран логина
    2. Вводит email и пароль
    3. Нажимает "Войти"
    4. Система проверяет credentials — валидны
    5. Создаётся сессия
    6. Переход на главный экран

    Проверить: токен сохраняется, профиль загружается.


# --- Edge Case ---

tc:auth:login-invalid:
  description: |
    Логин с неверным паролем.

    1. Пользователь открывает экран логина
    2. Вводит email и неверный пароль
    3. Нажимает "Войти"
    4. Система проверяет credentials — невалидны
    5. Показывается toast с ошибкой
    6. Пользователь остаётся на экране логина

    Важно: проверить что нельзя брутфорсить.


# --- Триггерный сценарий ---

tc:training:earn-aura:
  description: |
    Получение Aura за 200% энергии.

    1. Пользователь уже потратил 100% энергии сегодня
    2. Покупает бутылку энергии
    3. Начинает вторую тренировку
    4. Тратит энергию до 0 снова
    5. daily_progress достигает 200%
    6. Система вызывает action:aura:earn
    7. Пользователь получает +1 Aura

    Важно: Aura можно получить только раз в день.


# =============================================================================
# ТЕГИ :start И :end
# =============================================================================
#
# ПРАВИЛА РАССТАНОВКИ:
#
# 1. :start ставится на ВХОДНУЮ ТОЧКУ
#    - Экран откуда пользователь начинает
#    - Action который запускает сценарий
#
# 2. :end ставится на ФИНАЛЬНУЮ ТОЧКУ
#    - Экран куда пользователь попадает в конце
#    - Dialog который показывается как результат
#    - Action который завершает сценарий
#
# 3. Промежуточные шаги — БЕЗ суффикса
#    - tc:auth:login (без :start/:end)
#
# ПРИМЕР В СУЩНОСТЯХ:
#
#   screen:auth:login:
#     tags: [stage:mvp, tc:auth:login:start]
#
#   action:auth:do-login:
#     tags: [stage:mvp, tc:auth:login]
#
#   screen:main:dashboard:
#     tags: [stage:mvp, tc:auth:login:end]


# =============================================================================
# ОСОБЫЕ СЛУЧАИ
# =============================================================================
#
# A. ТРИГГЕРНЫЕ СЦЕНАРИИ
#    Автоматические события без явного действия пользователя.
#    :start ставится там, откуда триггер может сработать.
#
#    Пример: tc:aura:earn-daily
#      :start → screen:training:select-exercise
#      :end   → dialog:aura:celebration
#
# B. EDGE-CASE СЦЕНАРИИ
#    Ошибки, ограничения, негативные пути.
#    :start может совпадать с основным сценарием.
#    :end ставится на диалог ошибки.
#
#    Пример: tc:pools:insufficient-funds
#      :start → screen:pools:pools-list (как у join-and-play)
#      :end   → dialog:currency:insufficient-funds
#
# C. ЦИКЛИЧЕСКИЕ СЦЕНАРИИ
#    Возврат в начало после действия.
#    :end указывает на тот же экран что и :start.
#
#    Пример: tc:cart:update-qty
#      :start → screen:cart:view
#      :end   → screen:cart:view


# =============================================================================
# ПОРЯДОК ТЕГОВ В СУЩНОСТЯХ
# =============================================================================
#
# 1. stage:* (обязательно первый)
# 2. tc:* в алфавитном порядке
# 3. Другие теги
#
# Пример:
#   tags: [stage:mvp, tc:auth:login, tc:auth:register:start, tc:onboarding:happy-path]


# =============================================================================
# ФЛОУ РАБОТЫ
# =============================================================================
#
# 1. ПЛАНИРОВАНИЕ
#    - Определить эпик в _epics.yaml
#    - Написать tc:* с пошаговым описанием
#
# 2. РАЗМЕТКА :start
#    - Найти входную точку
#    - Добавить tc:X:Y:start в tags сущности
#
# 3. РАЗМЕТКА ПУТИ
#    - Пройти по шагам сценария
#    - Добавить tc:X:Y на каждую сущность
#
# 4. РАЗМЕТКА :end
#    - Найти финальную точку
#    - Добавить tc:X:Y:end в tags
#
# 5. ВАЛИДАЦИЯ
#    - Проверить что :start и :end существуют
#    - Проверить что путь между ними существует


# =============================================================================
# ЧЕКЛИСТ ПЕРЕД КОММИТОМ
# =============================================================================
#
# [ ] Каждый tc:* имеет description с шагами
# [ ] Каждый tc:* имеет :start в какой-то сущности
# [ ] Каждый tc:* имеет :end в какой-то сущности
# [ ] Промежуточные шаги размечены tc:* без суффикса
# [ ] Теги в сущностях отсортированы (stage первый, потом tc:*)
